# R√©glementation pour le Module Devis et Factures

## ‚ö†Ô∏è Avertissement Important

**Ce document fournit des informations g√©n√©rales sur les r√©glementations fran√ßaises. Il ne constitue pas un conseil juridique ou fiscal. Il est fortement recommand√© de consulter un expert-comptable ou un avocat sp√©cialis√© pour valider la conformit√© de votre impl√©mentation.**

---

## üìã Table des mati√®res

1. [Mentions obligatoires sur les factures](#mentions-obligatoires-sur-les-factures)
2. [Mentions obligatoires sur les devis](#mentions-obligatoires-sur-les-devis)
3. [Facturation √©lectronique (2026-2027)](#facturation-√©lectronique-2026-2027)
4. [Conservation et archivage](#conservation-et-archivage)
5. [Num√©rotation des factures](#num√©rotation-des-factures)
6. [TVA et calculs fiscaux](#tva-et-calculs-fiscaux)
7. [S√©curit√© et int√©grit√© des donn√©es](#s√©curit√©-et-int√©grit√©-des-donn√©es)
8. [Checklist de conformit√©](#checklist-de-conformit√©)

---

## 1. Mentions obligatoires sur les factures

### 1.1 Mentions g√©n√©rales (toujours obligatoires)

Une facture doit obligatoirement contenir :

- ‚úÖ **Num√©ro de facture** (unique, s√©quentiel, sans rupture)
- ‚úÖ **Date d'√©mission** de la facture
- ‚úÖ **Date de la vente ou de la prestation** (si diff√©rente de la date d'√©mission)
- ‚úÖ **Identit√© compl√®te du vendeur/prestataire** :
  - Nom ou raison sociale
  - Adresse compl√®te
  - Num√©ro SIREN ou SIRET
  - Num√©ro de TVA intracommunautaire (si applicable)
  - Forme juridique
  - Capital social (pour les soci√©t√©s)
  - RCS (Registre du Commerce et des Soci√©t√©s) avec ville d'immatriculation
- ‚úÖ **Identit√© compl√®te du client** :
  - Nom ou raison sociale
  - Adresse compl√®te
  - **Num√©ro SIREN du client** (obligatoire √† partir du 1er septembre 2026)
- ‚úÖ **D√©signation d√©taill√©e des produits ou services** :
  - Description pr√©cise
  - Quantit√©
  - Prix unitaire HT
  - Taux de TVA applicable
  - Montant HT par ligne
- ‚úÖ **Totaux** :
  - Total HT
  - Montant de la TVA par taux
  - Total TTC
- ‚úÖ **Conditions de paiement** :
  - Date d'√©ch√©ance
  - Modalit√©s de paiement
  - Taux des p√©nalit√©s de retard (si applicable)
  - Montant de l'indemnit√© forfaitaire pour frais de recouvrement (si applicable)
- ‚úÖ **Mentions sp√©ciales** :
  - "TVA sur les d√©bits" (si option choisie)
  - "Exon√©ration de TVA" (si applicable, avec r√©f√©rence √† l'article du CGI)
  - "Autoliquidation" (si applicable)
- ‚úÖ **Adresse de livraison** (si diff√©rente de l'adresse de facturation) - obligatoire √† partir du 1er septembre 2026
- ‚úÖ **Cat√©gorie de l'op√©ration** (vente, prestation de services, ou les deux) - obligatoire √† partir du 1er septembre 2026

### 1.2 Mentions sp√©cifiques selon le type d'activit√©

#### Pour les prestations de services :
- Lieu d'ex√©cution de la prestation
- Date d'ex√©cution ou p√©riode d'ex√©cution

#### Pour les ventes de biens :
- Date de livraison
- Adresse de livraison

#### Pour les activit√©s r√©glement√©es :
- Num√©ro d'autorisation d'exercer (professions r√©glement√©es)
- Num√©ro d'identification √† la TVA du client (si diff√©rent de France)

---

## 2. Mentions obligatoires sur les devis

### 2.1 Mentions minimales

Un devis doit contenir au minimum :

- ‚úÖ **Num√©ro de devis** (unique)
- ‚úÖ **Date d'√©mission**
- ‚úÖ **Date de validit√©** (recommand√© : 30 √† 90 jours)
- ‚úÖ **Identit√© du prestataire** :
  - Nom ou raison sociale
  - Adresse
  - SIREN/SIRET
  - Num√©ro de TVA intracommunautaire (si applicable)
- ‚úÖ **Identit√© du client** :
  - Nom ou raison sociale
  - Adresse
- ‚úÖ **Description d√©taill√©e des prestations** :
  - Description
  - Quantit√©
  - Prix unitaire HT
  - Taux de TVA
  - Montant HT par ligne
- ‚úÖ **Totaux** :
  - Total HT
  - TVA
  - Total TTC
- ‚úÖ **Conditions g√©n√©rales de vente** (CGV) ou r√©f√©rence aux CGV
- ‚úÖ **Modalit√©s de paiement**
- ‚úÖ **D√©lai d'ex√©cution**

### 2.2 Mentions recommand√©es

- ‚úÖ **Conditions d'acceptation** (signature, d√©lai d'acceptation)
- ‚úÖ **Conditions d'annulation**
- ‚úÖ **Garanties**
- ‚úÖ **R√©f√©rence aux normes ou standards** (si applicable)

---

## 3. Facturation √©lectronique (2026-2027)

### 3.1 Calendrier de mise en ≈ìuvre

#### Phase 1 : 1er septembre 2026
- **Obligation de r√©ception** : Toutes les entreprises doivent pouvoir recevoir des factures √©lectroniques
- **Obligation d'√©mission** : Grandes entreprises et ETI (Entreprises de Taille Interm√©diaire)

#### Phase 2 : 1er septembre 2027
- **Obligation d'√©mission** : PME et micro-entreprises

### 3.2 Formats accept√©s

Les factures √©lectroniques doivent √™tre au format :
- **Factur-X** (format hybride PDF/A-3 + XML)
- **UBL** (Universal Business Language)
- **CII** (Cross Industry Invoice)

### 3.3 Plateformes de d√©mat√©rialisation (PDP)

Les entreprises doivent utiliser :
- Une **PDP certifi√©e** (Plateforme de D√©mat√©rialisation Partenaire)
- Ou le **PPF** (Portail Public de Facturation) g√©r√© par l'√âtat

### 3.4 Obligations techniques

- ‚úÖ **Inalt√©rabilit√©** : Les factures ne doivent pas pouvoir √™tre modifi√©es apr√®s √©mission
- ‚úÖ **S√©curisation** : Chiffrement et authentification
- ‚úÖ **Conservation** : Archivage conforme (voir section 4)
- ‚úÖ **Tra√ßabilit√©** : Horodatage et journalisation des op√©rations

---

## 4. Conservation et archivage

### 4.1 Dur√©e de conservation

- ‚úÖ **Factures** : **10 ans** minimum (Code de commerce, article L123-22)
- ‚úÖ **Devis** : **5 ans** minimum (recommand√© : 10 ans pour la coh√©rence)

### 4.2 Format de conservation

- ‚úÖ **Format original** : Conserver dans le format d'√©mission
- ‚úÖ **Lisibilit√©** : Garantir la lisibilit√© pendant toute la dur√©e de conservation
- ‚úÖ **Int√©grit√©** : Garantir l'int√©grit√© (pas de modification possible)

### 4.3 Archivage √©lectronique

Si archivage √©lectronique :
- ‚úÖ **Norme NF Z 42-013** (archivage √©lectronique)
- ‚úÖ **Horodatage qualifi√©** (norme ETSI TS 101 861)
- ‚úÖ **Signature √©lectronique** (si applicable)
- ‚úÖ **Sauvegarde s√©curis√©e** (backup r√©gulier, g√©olocalisation)

---

## 5. Num√©rotation des factures

### 5.1 R√®gles de num√©rotation

- ‚úÖ **S√©quence unique** : Chaque facture doit avoir un num√©ro unique
- ‚úÖ **S√©quence chronologique** : Num√©rotation s√©quentielle sans rupture
- ‚úÖ **S√©quence continue** : Pas de num√©ro manquant (sauf brouillons supprim√©s)
- ‚úÖ **Format libre** : Le format est libre (ex: FAC-2025-001, 2025-001, etc.)

### 5.2 Gestion des brouillons

- ‚ö†Ô∏è **Les brouillons ne doivent pas avoir de num√©ro d√©finitif** jusqu'√† validation
- ‚ö†Ô∏è **Les brouillons supprim√©s ne doivent pas cr√©er de rupture dans la num√©rotation**
- ‚úÖ **Syst√®me de pr√©-num√©rotation** : R√©server un num√©ro uniquement √† la validation

### 5.3 Cas particuliers

- ‚úÖ **Factures rectificatives** : Num√©ro distinct (ex: FAC-2025-001-AVOIR)
- ‚úÖ **Factures d'acompte** : Num√©rotation s√©par√©e ou int√©gr√©e (√† d√©finir selon usage)
- ‚úÖ **Factures pro forma** : Ne pas utiliser la m√™me s√©quence que les factures d√©finitives

---

## 6. TVA et calculs fiscaux

### 6.1 Taux de TVA en France (2025)

- ‚úÖ **Taux normal** : 20%
- ‚úÖ **Taux r√©duit** : 10% (restauration, transports, travaux)
- ‚úÖ **Taux r√©duit** : 5,5% (produits alimentaires, √©nergie)
- ‚úÖ **Taux r√©duit** : 2,1% (m√©dicaments, presse)

### 6.2 Calculs obligatoires

- ‚úÖ **Montant HT par ligne** = Quantit√© √ó Prix unitaire HT
- ‚úÖ **Montant TVA par ligne** = Montant HT √ó Taux TVA
- ‚úÖ **Total HT** = Somme des montants HT
- ‚úÖ **Total TVA** = Somme des montants TVA
- ‚úÖ **Total TTC** = Total HT + Total TVA

### 6.3 Arrondis

- ‚úÖ **Arrondi √† 2 d√©cimales** pour chaque ligne
- ‚úÖ **Arrondi final** : Total TTC arrondi au centime d'euro le plus proche
- ‚ö†Ô∏è **Coh√©rence** : V√©rifier que Total TTC = Somme(HT √ó (1 + TVA)) arrondi

### 6.4 Cas particuliers

- ‚úÖ **TVA sur les d√©bits** : Mention obligatoire si option choisie
- ‚úÖ **Exon√©ration de TVA** : Mention de l'article du Code G√©n√©ral des Imp√¥ts
- ‚úÖ **Autoliquidation** : Mention obligatoire
- ‚úÖ **TVA intracommunautaire** : Num√©ro de TVA du client obligatoire

---

## 7. S√©curit√© et int√©grit√© des donn√©es

### 7.1 Protection des donn√©es

- ‚úÖ **RGPD** : Conformit√© avec le R√®glement G√©n√©ral sur la Protection des Donn√©es
- ‚úÖ **Chiffrement** : Donn√©es sensibles chiffr√©es (en transit et au repos)
- ‚úÖ **Authentification** : Acc√®s s√©curis√© (2FA recommand√©)
- ‚úÖ **Journalisation** : Tra√ßabilit√© des actions (qui, quoi, quand)

### 7.2 Int√©grit√© des factures

- ‚úÖ **Immutabilit√©** : Une fois valid√©e, une facture ne peut pas √™tre modifi√©e
- ‚úÖ **Versioning** : Conserver l'historique des modifications (brouillons)
- ‚úÖ **Signature** : Signature √©lectronique ou horodatage pour les factures √©lectroniques
- ‚úÖ **Audit trail** : Journal des modifications avec horodatage

### 7.3 Sauvegarde

- ‚úÖ **Backup r√©gulier** : Sauvegarde quotidienne minimum
- ‚úÖ **R√©cup√©ration** : Plan de reprise apr√®s sinistre (PRA)
- ‚úÖ **G√©olocalisation** : Sauvegarde dans plusieurs zones g√©ographiques (si cloud)

---

## 8. Checklist de conformit√©

### 8.1 Pour les factures

- [ ] Num√©ro unique et s√©quentiel
- [ ] Date d'√©mission
- [ ] Identit√© compl√®te du vendeur (nom, adresse, SIREN, TVA intracommunautaire, RCS, capital)
- [ ] Identit√© compl√®te du client (nom, adresse, SIREN √† partir de 2026)
- [ ] Description d√©taill√©e des produits/services
- [ ] Quantit√©, prix unitaire HT, taux TVA par ligne
- [ ] Total HT, Total TVA, Total TTC
- [ ] Conditions de paiement (date d'√©ch√©ance, modalit√©s)
- [ ] P√©nalit√©s de retard (si applicable)
- [ ] Mention "TVA sur les d√©bits" (si applicable)
- [ ] Adresse de livraison (si diff√©rente, obligatoire √† partir de 2026)
- [ ] Cat√©gorie de l'op√©ration (obligatoire √† partir de 2026)
- [ ] Conservation 10 ans minimum
- [ ] Format √©lectronique conforme (√† partir de 2026/2027 selon taille)

### 8.2 Pour les devis

- [ ] Num√©ro unique
- [ ] Date d'√©mission
- [ ] Date de validit√©
- [ ] Identit√© du prestataire
- [ ] Identit√© du client
- [ ] Description d√©taill√©e
- [ ] Totaux (HT, TVA, TTC)
- [ ] Conditions g√©n√©rales
- [ ] Modalit√©s de paiement
- [ ] D√©lai d'ex√©cution

### 8.3 Techniques

- [ ] Num√©rotation sans rupture
- [ ] Calculs TVA corrects
- [ ] Arrondis coh√©rents
- [ ] Immutabilit√© des factures valid√©es
- [ ] Archivage s√©curis√© (10 ans)
- [ ] Sauvegarde r√©guli√®re
- [ ] Journalisation des actions
- [ ] Conformit√© RGPD
- [ ] Chiffrement des donn√©es sensibles
- [ ] Authentification s√©curis√©e

### 8.4 Facturation √©lectronique (pr√©paration 2026-2027)

- [ ] Format Factur-X, UBL ou CII
- [ ] Int√©gration avec une PDP certifi√©e ou PPF
- [ ] Inalt√©rabilit√© garantie
- [ ] Horodatage qualifi√©
- [ ] Signature √©lectronique (si applicable)

---

## 9. Recommandations d'impl√©mentation

### 9.1 Champs √† ajouter dans la base de donn√©es

```sql
-- Exemple de structure recommand√©e pour les factures
CREATE TABLE invoices (
    id SERIAL PRIMARY KEY,
    number VARCHAR(50) UNIQUE NOT NULL,  -- Num√©ro unique
    issue_date DATE NOT NULL,
    sale_date DATE,  -- Date de vente/prestation
    due_date DATE NOT NULL,
    
    -- Vendeur
    seller_name VARCHAR(255) NOT NULL,
    seller_address TEXT NOT NULL,
    seller_siren VARCHAR(9) NOT NULL,
    seller_siret VARCHAR(14),
    seller_vat_number VARCHAR(20),
    seller_rcs VARCHAR(50),
    seller_legal_form VARCHAR(100),
    seller_capital DECIMAL(15,2),
    
    -- Client
    client_id INTEGER REFERENCES clients(id),
    client_name VARCHAR(255) NOT NULL,
    client_address TEXT NOT NULL,
    client_siren VARCHAR(9) NOT NULL,  -- Obligatoire √† partir de 2026
    client_delivery_address TEXT,  -- Si diff√©rente
    
    -- Totaux
    subtotal_ht DECIMAL(15,2) NOT NULL,
    total_tax DECIMAL(15,2) NOT NULL,
    total_ttc DECIMAL(15,2) NOT NULL,
    
    -- Mentions sp√©ciales
    vat_on_debit BOOLEAN DEFAULT FALSE,
    vat_exemption_reference TEXT,
    operation_category VARCHAR(50),  -- Obligatoire √† partir de 2026
    
    -- Conditions
    payment_terms TEXT,
    late_penalty_rate DECIMAL(5,2),
    recovery_fee DECIMAL(15,2),
    
    -- Statut
    status VARCHAR(50) NOT NULL,  -- brouillon, envoy√©e, pay√©e, annul√©e
    
    -- Conservation
    created_at TIMESTAMP NOT NULL,
    updated_at TIMESTAMP,
    archived_at TIMESTAMP,
    
    -- √âlectronique
    electronic_format VARCHAR(20),  -- factur-x, ubl, cii
    pdp_id VARCHAR(100),  -- ID de la plateforme de d√©mat√©rialisation
    electronic_signature TEXT,
    timestamp_qualified TIMESTAMP
);
```

### 9.2 Validation c√¥t√© backend

```python
# Exemple de validation (Python/FastAPI)
from pydantic import BaseModel, validator
from datetime import date

class InvoiceCreate(BaseModel):
    number: str
    issue_date: date
    seller_siren: str
    client_siren: str  # Obligatoire √† partir de 2026
    subtotal_ht: float
    total_tax: float
    total_ttc: float
    
    @validator('seller_siren')
    def validate_siren(cls, v):
        if not v or len(v) != 9 or not v.isdigit():
            raise ValueError('SIREN doit contenir 9 chiffres')
        return v
    
    @validator('client_siren')
    def validate_client_siren(cls, v):
        if not v or len(v) != 9 or not v.isdigit():
            raise ValueError('SIREN client doit contenir 9 chiffres')
        return v
    
    @validator('total_ttc')
    def validate_totals(cls, v, values):
        subtotal = values.get('subtotal_ht', 0)
        tax = values.get('total_tax', 0)
        expected_ttc = round(subtotal + tax, 2)
        if abs(v - expected_ttc) > 0.01:  # Tol√©rance d'arrondi
            raise ValueError('Total TTC incoh√©rent avec HT + TVA')
        return v
```

### 9.3 G√©n√©ration de num√©ros

```python
# Exemple de g√©n√©ration de num√©ro s√©quentiel
def generate_invoice_number(year: int, last_number: int) -> str:
    """
    G√©n√®re un num√©ro de facture s√©quentiel.
    Format: FAC-YYYY-NNNN
    """
    next_number = last_number + 1
    return f"FAC-{year}-{next_number:04d}"

# V√©rification d'unicit√©
def ensure_unique_invoice_number(number: str, db_session):
    existing = db_session.query(Invoice).filter(Invoice.number == number).first()
    if existing:
        raise ValueError(f"Le num√©ro de facture {number} existe d√©j√†")
```

---

## 10. Ressources et r√©f√©rences

### 10.1 Textes officiels

- **Code de commerce** : Article L123-22 (conservation 10 ans)
- **Code g√©n√©ral des imp√¥ts** : Articles 242 nonies A √† 242 nonies E (facturation √©lectronique)
- **D√©cret n¬∞ 2021-1190** : Facturation √©lectronique
- **Arr√™t√© du 29 d√©cembre 2021** : Formats de facturation √©lectronique

### 10.2 Sites officiels

- **Minist√®re de l'√âconomie** : https://www.economie.gouv.fr/facturation-electronique
- **Direction G√©n√©rale des Finances Publiques** : https://www.impots.gouv.fr/
- **Agence Nationale des Titres S√©curis√©s (ANTS)** : https://ants.gouv.fr/

### 10.3 Normes techniques

- **NF Z 42-013** : Archivage √©lectronique
- **Factur-X** : https://www.factur-x.org/
- **UBL** : https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=ubl
- **CII** : UN/CEFACT Cross Industry Invoice

---

## 11. Points d'attention sp√©cifiques

### 11.1 Factures rectificatives (avoir)

- ‚úÖ **Num√©ro distinct** : Ne pas r√©utiliser le num√©ro de la facture originale
- ‚úÖ **R√©f√©rence** : R√©f√©rencer la facture originale
- ‚úÖ **Mentions** : M√™me niveau de d√©tail que la facture originale
- ‚úÖ **Impact comptable** : G√©rer l'impact sur la comptabilit√©

### 11.2 Factures d'acompte

- ‚úÖ **Num√©rotation** : D√©cider si s√©quence s√©par√©e ou int√©gr√©e
- ‚úÖ **Mention** : Indiquer clairement "Acompte"
- ‚úÖ **R√©f√©rence** : Lier √† la facture finale
- ‚úÖ **TVA** : Appliquer la TVA sur les acomptes

### 11.3 Factures pro forma

- ‚úÖ **Distinction** : Ne pas confondre avec facture d√©finitive
- ‚úÖ **Num√©rotation** : S√©quence s√©par√©e (ex: PRO-FORMA-2025-001)
- ‚úÖ **Mention** : "PRO FORMA - Ne constitue pas une facture"

### 11.4 Export / Intracommunautaire

- ‚úÖ **Num√©ro TVA client** : Obligatoire pour les ventes intracommunautaires
- ‚úÖ **Mention** : "Exon√©ration TVA - Article 262 ter du CGI"
- ‚úÖ **D√©claration** : D√©claration DEB (D√©claration d'√âchanges de Biens)

---

## 12. Sanctions en cas de non-conformit√©

### 12.1 Sanctions administratives

- ‚ö†Ô∏è **Amende** : 15 ‚Ç¨ par facture non conforme (plafonn√©e √† 15 000 ‚Ç¨)
- ‚ö†Ô∏è **Contr√¥le fiscal** : Risque de redressement
- ‚ö†Ô∏è **Refus de d√©duction TVA** : En cas de facture non conforme

### 12.2 Sanctions p√©nales

- ‚ö†Ô∏è **Faux et usage de faux** : En cas de facture falsifi√©e
- ‚ö†Ô∏è **Fraude fiscale** : Sanctions p√©nales possibles

---

## üìù Notes finales

1. **Consulter un expert** : Ce document est informatif. Consultez un expert-comptable ou un avocat pour valider votre impl√©mentation.

2. **√âvolution r√©glementaire** : Les r√©glementations √©voluent. Restez inform√© des mises √† jour.

3. **Tests de conformit√©** : Testez votre syst√®me avec des experts avant la mise en production.

4. **Documentation** : Documentez vos choix techniques et vos validations de conformit√©.

5. **Formation utilisateurs** : Formez vos utilisateurs aux bonnes pratiques de facturation.

---

**Derni√®re mise √† jour** : Janvier 2025
**Prochaine r√©vision** : Avril 2025 (avant la mise en ≈ìuvre de la facturation √©lectronique)
